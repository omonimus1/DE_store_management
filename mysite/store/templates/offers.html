
{% extends "base.html" %}
{% load static %}

{% block content %}   

    <div class="page-content">
        <!-- Page-Title -->
        <div class="page-title-box">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h4 class="page-title mb-1">Aggiorna le impostazioni generali di beautygo</h4>
                    </div>
                </div>

            </div>
        </div>



        <div class="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="header-title mb-4">Impostazioni</h5>

                                <form id="settings-form">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="exampleInputEmail1">Beautygo Fee</label>
                                                <input type="number"  min="0" max="100" step="0.25" value="{{ $settings['withdrawal_fee']->value }}"  class="form-control" id="withdrawal_fee" name="withdrawal_fee" pattern="^\d*(\.\d{0,2})?$" required>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="cancel_limit">LIMITE CANCELLAZIONI SHOP MENSILI</label>
                                                <input type="number"  min="1" max="200" step="1" value="{{ $settings['max_cancellation_per_month']->value }}"  class="form-control" id="max_cancellation_per_month" name="max_cancellation_per_month" aria-describedby="emailHelp" pattern="^\d*(\.\d{0,2})?$" required>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="exampleInputPassword1">Minimo Prelevabile dagli shop</label>
                                                <input type="number" pattern="^\d*(\.\d{0,2})?$"  min="0" max="100" step="0.25" value="{{ $settings['withdrawal_minimum']->value }}" class="form-control" name="withdrawal_minimum" required>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="exampleInputPassword1">Percentuale affiliato commercial</label>
                                                <input type="number" pattern="^\d*(\.\d{0,2})?$"  min="0" max="100" step="0.25" value="{{ $settings['commercial_perc']->value }}" class="form-control" name="commercial_perc" required>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="text-right">
                                        <a href="/logout" class="btn btn-danger mr-2">Logout</a>
                                        <a href="" class="btn btn-light mr-2">Annulla</a>
                                        <button type="submit" class="btn btn-primary">Aggiorna</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- end row -->

                </div> <!-- container-fluid -->
            </div>
            <!-- end page-content-wrapper -->
        </div>

        <!-- End Page-content -->
    </div>


    {% commment %}
    <script>

        $('#settings-form').submit(function(e){

            e.preventDefault();

            if( true )
            {

                window.LOADER.show();
                axios.post('{{ env('API_URL') }}/admin/configuration/all', $(this).serializeObject())
                    .then(function(){
                        window.LOADER.hide();
                        alertify.success("Impostazioni aggiornate");
                    })
                    .catch(function(){
                        window.LOADER.hide();
                        alertify.error("Impossibile aggiornare");
                    })
            }


        });

    </script>
    {% endcomment %}

{% endblock content%}
